<template>
  <div class="flex min-h-screen bg-white">
    <button
      @click="toggleSidebar"
      class="fixed top-4 left-4 z-50 lg:hidden bg-primary text-white p-2 rounded-lg"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>

    <aside
      :class="[
        'w-[250px] border-r border-[#E6EFF5] flex-shrink-0 bg-white',
        'lg:relative fixed inset-y-0 left-0 z-40 transition-transform duration-300',
        sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'
      ]"
    >
      <div class="px-[27px] py-[30px]">
        <div class="flex items-center gap-3">
          <div class="w-[38px] h-[37px] rounded-full bg-gradient-to-br from-teal-400 to-teal-500 flex items-center justify-center text-white font-bold text-xl flex-shrink-0">
            A
          </div>
          <h1 class="text-[22px] font-fredoka text-primary leading-none">AnsibleDash</h1>
        </div>
      </div>

      <nav class="mt-[51px]">
        <router-link
          to="/"
          class="nav-item"
          :class="{ active: $route.name === 'inventories' }"
        >
          <svg
            class="w-[25px] h-[25px]"
            :class="$route.name === 'inventories' ? 'fill-[#1814F3]' : 'fill-[#B1B1B1]'"
            viewBox="0 0 25 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M24.326 10.8738C24.3254 10.8732 24.3248 10.8727 24.3242 10.8721L14.1262 0.674438C13.6915 0.239563 13.1136 0 12.4989 0C11.8841 0 11.3062 0.239372 10.8713 0.674248L0.67866 10.8667C0.675227 10.8702 0.671794 10.8738 0.668361 10.8772C-0.224279 11.775 -0.222753 13.2317 0.672747 14.1272C1.08187 14.5365 1.62223 14.7736 2.19996 14.7984C2.22342 14.8006 2.24707 14.8018 2.27091 14.8018H2.67737V22.3066C2.67737 23.7917 3.88568 25 5.37112 25H9.36091C9.76527 25 10.0933 24.6721 10.0933 24.2676V18.3838C10.0933 17.7061 10.6446 17.1549 11.3222 17.1549H13.6755C14.3532 17.1549 14.9044 17.7061 14.9044 18.3838V24.2676C14.9044 24.6721 15.2323 25 15.6368 25H19.6266C21.1121 25 22.3204 23.7917 22.3204 22.3066V14.8018H22.6973C23.3118 14.8018 23.8898 14.5624 24.3248 14.1275C25.2213 13.2305 25.2217 11.7714 24.326 10.8738Z"
            />
          </svg>
          <span>Inventories 清單</span>
        </router-link>

        <router-link
          to="/playbook"
          class="nav-item"
          :class="{ active: $route.name === 'playbook' }"
        >
          <svg
            class="w-[25px] h-[25px] fill-[#B1B1B1]"
            viewBox="0 0 25 25"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_111_130)">
              <path
                d="M24.7852 1.25045L23.7495 0.214663C23.5336 -0.00135204 23.2063 -0.0605316 22.9286 0.0654447L17.3654 2.52135C17.1465 2.62096 16.9906 2.8213 16.9477 3.05743C16.9051 3.2942 16.9805 3.53638 17.1505 3.70636L21.2936 7.84946C21.4636 8.01943 21.7058 8.09477 21.9425 8.05224C22.1787 8.00933 22.379 7.85351 22.4786 7.63452L24.9345 2.07125C25.0604 1.79357 25.0013 1.46637 24.7852 1.25045Z"
              />
              <path
                d="M4.73145 16.1255L0.642589 20.2143C-0.214196 21.0711 -0.214196 22.4649 0.642589 23.3217L1.67833 24.3574C2.53512 25.2142 3.92891 25.2142 4.78565 24.3574L8.87451 20.2685L4.73145 16.1255ZM4.27496 21.7711C3.98868 22.0574 3.52535 22.0574 3.23912 21.7711C2.95294 21.4848 2.95294 21.0215 3.23912 20.7353L5.25645 18.718C5.54273 18.4317 6.00601 18.4317 6.29219 18.718C6.57847 19.0043 6.57847 19.4675 6.29219 19.7538L4.27496 21.7711Z"
              />
              <path
                d="M11.9818 17.1612L7.83868 13.0181C7.26763 12.4471 6.33814 12.4471 5.76715 13.0181C5.19611 13.5892 5.19611 14.5187 5.76715 15.0897L9.91026 19.2328C10.4812 19.8038 11.4107 19.8038 11.9818 19.2328C12.5528 18.6619 12.5528 17.7323 11.9818 17.1612Z"
              />
              <path
                d="M19.2222 7.84941L17.1506 5.77783L11.464 11.4644C10.8919 10.8924 9.96455 10.8924 9.39243 11.4644L8.87451 11.9824L13.0176 16.1255L13.5355 15.6075C14.1076 15.0354 14.1076 14.1081 13.5355 13.536L19.2222 7.84941Z"
              />
              <path
                d="M23.7149 17.498C22.5259 16.309 21.0961 16.0534 19.4556 16.3465L16.1258 13.0171L15.3307 13.8123C15.5925 14.7961 15.3379 15.8763 14.571 16.6432L14.0542 17.16L16.3457 19.4514C16.1147 20.7444 16.1364 21.841 16.9394 23.0304C17.8661 24.4035 19.4879 25.184 21.187 24.9501C21.4679 24.9115 21.7025 24.7167 21.7928 24.4479C21.8831 24.1792 21.8135 23.8824 21.613 23.6819L20.6057 22.6764V20.6051H22.6792L23.6809 21.6068C23.8818 21.8077 24.1793 21.8768 24.4483 21.7858C24.7173 21.6948 24.9115 21.4591 24.9493 21.1776C25.1282 19.8453 24.6923 18.475 23.7149 17.498Z"
              />
              <path
                d="M8.64437 5.53236C8.93504 3.90898 8.69969 2.48085 7.49286 1.27314C6.67172 0.45205 5.57308 0 4.39936 0C4.20175 0 4.00624 0.0128906 3.81327 0.0384277C3.53149 0.0758299 3.2956 0.270263 3.20448 0.53955C3.11337 0.808739 3.18295 1.10639 3.38393 1.30737L4.39545 2.30883V4.39447H2.31376L1.30976 3.37641C1.10922 3.17587 0.812204 3.10649 0.543357 3.19697C0.274607 3.28745 0.0802229 3.52231 0.0415999 3.80331C-0.181544 5.42816 0.522507 7.07889 1.95898 8.04862C3.15292 8.85301 4.25614 8.87293 5.53944 8.64159L7.84027 10.9462L8.35731 10.4291C9.1242 9.66224 10.2043 9.40779 11.1882 9.66951L11.983 8.87469L8.64437 5.53236Z"
              />
            </g>
            <defs>
              <clipPath id="clip0_111_130">
                <rect width="25" height="25" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <span>PlayBook 管理與執行</span>
        </router-link>

        <router-link
          to="/ai-deploy"
          class="nav-item"
          :class="{ active: $route.name === 'ai-deploy' }"
        >
          <svg
            class="w-[25px] h-[25px] fill-[#B1B1B1]"
            viewBox="0 0 25 25"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_111_150)">
              <path
                d="M12.3218 12.0426C13.9762 12.0426 15.4088 11.4492 16.5794 10.2785C17.7499 9.10793 18.3433 7.67571 18.3433 6.02109C18.3433 4.36705 17.7499 2.93463 16.5792 1.76372C15.4085 0.593374 13.976 0 12.3218 0C10.6672 0 9.23494 0.593374 8.0644 1.76391C6.89386 2.93444 6.30029 4.36686 6.30029 6.02109C6.30029 7.67571 6.89386 9.10813 8.06459 10.2787C9.23532 11.449 10.6677 12.0426 12.3218 12.0426Z"
              />
              <path
                d="M22.8579 19.2237C22.8241 18.7366 22.7558 18.2052 22.6553 17.644C22.5538 17.0787 22.4232 16.5443 22.2668 16.0558C22.1052 15.5509 21.8855 15.0523 21.6139 14.5745C21.332 14.0786 21.0009 13.6468 20.6293 13.2915C20.2408 12.9197 19.7651 12.6209 19.215 12.4028C18.6668 12.186 18.0593 12.0761 17.4095 12.0761C17.1543 12.0761 16.9075 12.1808 16.4309 12.4912C16.1375 12.6825 15.7944 12.9037 15.4114 13.1484C15.0839 13.3571 14.6402 13.5526 14.0923 13.7296C13.5576 13.9026 13.0148 13.9903 12.479 13.9903C11.9432 13.9903 11.4006 13.9026 10.8654 13.7296C10.318 13.5528 9.87434 13.3573 9.54723 13.1486C9.16786 12.9062 8.82454 12.6849 8.5268 12.491C8.05073 12.1806 7.80373 12.0759 7.54852 12.0759C6.8985 12.0759 6.2912 12.186 5.74322 12.403C5.19352 12.6207 4.71764 12.9195 4.32873 13.2917C3.95737 13.6472 3.62606 14.0788 3.34454 14.5745C3.07312 15.0523 2.85339 15.5507 2.69165 16.056C2.53544 16.5444 2.40479 17.0787 2.30331 17.644C2.2028 18.2044 2.13451 18.736 2.10075 19.2243C2.06757 19.7026 2.05078 20.1991 2.05078 20.7005C2.05078 22.0055 2.46563 23.062 3.28369 23.8412C4.09164 24.61 5.16071 25.0001 6.46076 25.0001H18.4984C19.7985 25.0001 20.8672 24.6102 21.6753 23.8412C22.4936 23.0626 22.9084 22.0059 22.9084 20.7003C22.9082 20.1966 22.8912 19.6998 22.8579 19.2237Z"
              />
            </g>
            <defs>
              <clipPath id="clip0_111_150">
                <rect width="25" height="25" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <span>AI 對話部屬</span>
        </router-link>
      </nav>
    </aside>

    <div
      v-if="sidebarOpen"
      @click="toggleSidebar"
      class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"
    ></div>

    <main class="flex-1 flex flex-col w-full">
      <slot />
    </main>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const sidebarOpen = ref(false)

const toggleSidebar = () => {
  sidebarOpen.value = !sidebarOpen.value
}
</script>

<style scoped>
.nav-item {
  @apply flex items-center gap-[25px] px-[44px] py-[17px] text-[18px] font-medium text-[#B1B1B1] relative transition-colors;
  font-family: 'Inter', sans-serif;
}

.nav-item.active {
  @apply text-[#1814F3];
}

.nav-item.active::before {
  content: '';
  @apply absolute left-0 top-0 w-[6px] h-full bg-[#2D60FF] rounded-r-[10px];
}

.nav-item:hover {
  @apply text-[#1814F3];
}
</style>
